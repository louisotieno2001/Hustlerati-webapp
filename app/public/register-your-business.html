<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business registration</title>
    <link rel="stylesheet" href="styles/index.css">
    <link rel="stylesheet" href="styles/small-devices.css">
    <link rel="icon" href="./res/logo1.png" type="image/x-icon">
    <style>
     
    </style>
</head>
<body>
    <div class="login-page">
        <div class="massive-logo" title="logo-image"></div>
        <div class="login-form">
            <h1>Welcome Tycoon</h1>
            <form action="">
                <input type="text" placeholder="Business name" required class="name" id="name"> <br>
                <input type="text" placeholder="Business niche" required class="niche" id="niche"> <br>
                <input type="text" name="location" id="location" placeholder="Location"> <br>
                <input type="text" name="numbers" id="numbers" placeholder="Number of employees"> <br>
                <input type="tel" name="phone" id="phone" placeholder="Business phone number"> <br>
                <button id="registerBusiness" class="button-5" role="button">Register</button>
                <h4>Don't want an account? <a href="/home">Go back home</a></h4>
            </form>
        </div>
        <script>
            const submitBtn = document.getElementById('registerBusiness');

            submitBtn.addEventListener("click", async (e) => {
                    e.preventDefault();
                    const businessName = document.getElementById('name').value;
                    const businessNiche = document.getElementById('niche').value;
                    const empNo = document.getElementById('numbers').value;
                    const businessPhone = document.getElementById('phone').value;
                    const location = document.getElementById('location').value;
              
                    // Validate input (you may want to implement more robust validation)
                    if (!businessName || !businessNiche || !empNo || !businessPhone || !location) {
                        alert("All fields are required.");
                        return;
                    }
              
                    // Create user data object
                    const formData = {
                        businessName,
                        businessNiche,
                        businessPhone,
                        location,
                        empNo
                    };
                    try {
                        // Send registration data to server
                        const response = await fetch('/register-business', {
                            method: "POST",
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(formData)
                        });
              
                        const result = await response.json();
              
                        if (response.ok) {
                            alert("Business regisration successful!");
                            // Redirect to login page or perform other actions after successful registration
                            window.location.href = "/home";
                        } else {
                            alert("Registration failed. Please try again.");
                        }
                    } catch (error) {
                        console.error("Error during registration:", error);
                        alert("An error occurred. Please try again later.");
                    }
                });
        </script>
    </div>
</body>
</html>