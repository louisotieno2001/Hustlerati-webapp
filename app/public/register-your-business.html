<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business registration</title>
    <link rel="stylesheet" href="styles/index.css">
    <link rel="stylesheet" href="styles/small-devices.css">
    <link rel="icon" href="./res/logo1.png" type="image/x-icon">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
     
    </style>
</head>
<body>
    <div class="login-page">
        <div class="massive-logo" title="logo-image"></div>
        <div class="login-form">
            <h1>Welcome Tycoon</h1>
            <form action="">
                <div class="input-div">
                    <span class="material-symbols-outlined">
                        account_circle
                    </span>
                    <input type="text" id="name" name="name" required placeholder="Hustle name">
                </div>
                <div class="input-div">
                    <span class="material-symbols-outlined">
                        domain
                        </span>
                    <!-- <input type="text" id="niche" name="niche" required placeholder="Niche"> -->
                     <select name="niche" id="niche">
                        <option value="fashion">Fashion</option>
                        <option value="electronics">Electronics</option>
                        <option value="food">Food</option>
                        <option value="art">Art</option>
                        <option value="software">Software</option>
                     </select>
                </div>
                <div class="input-div">
                    <span class="material-symbols-outlined">
                        phone_enabled
                    </span>
                    <input type="tel" name="phone" id="phone" placeholder="Phone" required>
                </div>
                <div class="value-suggestions">
                    <div class="input-div">
                        <span class="material-symbols-outlined">
                            location_on
                            </span>
                        <input type="text" name="location" id="location" placeholder="Location" required>
                    </div>
                </div>
                <div class="input-div">
                    <span class="material-symbols-outlined">
                        counter_7
                        </span>
                    <input type="text" name="numbers" id="numbers" placeholder="Number of employees" required>
                </div>
                <button id="registerBusiness" class="button-5" role="button">Register</button>
                <h4>Don't want an account? <a href="/home">Go back home</a></h4>
            </form>
        </div>
        <script>
            const submitBtn = document.getElementById('registerBusiness');

            submitBtn.addEventListener("click", async (e) => {
                    e.preventDefault();
                    const businessName = document.getElementById('name').value;
                    const businessNiche = document.getElementById('niche').value;
                    const empNo = document.getElementById('numbers').value;
                    const businessPhone = document.getElementById('phone').value;
                    const location = document.getElementById('location').value;
              
                    // Validate input (you may want to implement more robust validation)
                    if (!businessName || !businessNiche || !empNo || !businessPhone || !location) {
                        alert("All fields are required.");
                        return;
                    }
              
                    // Create user data object
                    const formData = {
                        businessName,
                        businessNiche,
                        businessPhone,
                        location,
                        empNo
                    };
                    try {
                        // Send registration data to server
                        const response = await fetch('/update-business', {
                            method: "POST",
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(formData)
                        });
              
                        const result = await response.json();
              
                        if (response.ok) {
                            alert("Business regisration successful!");
                            window.location.href = "/home";
                        } else {
                            alert("Registration failed. Please try again.");
                        }
                    } catch (error) {
                        console.error("Error during registration:", error);
                        alert("An error occurred. Please try again later.");
                    }
                });
        </script>
    </div>
</body>
</html>