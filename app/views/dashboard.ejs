<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Hustlerati</title>
    <link rel="icon" href="/images/logo1.png" type="image/x-icon">
    <link rel="stylesheet" href="/styles/dashboard.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-VCMHYS7QJ4');
    </script>
</head>
<body>
    <div class="top-menu" id="top-menu">
        <img src="/images/logo1.png" alt="Logo Image" srcset="" style="height: 60px; width: 60px;">
        <span id="open-menu">&#9776;</span>
        <span id="close-menu">&#10005;</span>
        <div class="sub-menu" id="sub-menu">
            <div class="link-item">
                <span class="material-symbols-outlined">grid_view</span>
                <a href="/home" class="menu-link" title="Dashboard">Dashboard</a>
            </div>
            <div class="link-item">
                <span class="material-symbols-outlined">local_convenience_store</span>
                <a href="/home" class="menu-link" title="Marketplace">Marketplace</a>
            </div>
            <div class="link-item">
                <span class="material-symbols-outlined">monitoring</span>
                <a href="/home" class="menu-link" title="Investor Insights">Investor Insights</a>
            </div>
            <div class="link-item">
                <span class="material-symbols-outlined">newspaper</span>
                <a href="/home" class="menu-link" title="News feed">News Feed</a>
            </div>
            <div class="link-item">
                <span class="material-symbols-outlined">account_circle</span>
                <a href="/home" class="menu-link" title="Profile">Profile</a>
            </div>
            <div class="link-item"><span class="material-symbols-outlined">
                    gavel
                </span><a href="" id="terms">Terms of service</a></div>
        </div>
    </div>
    <div class="display">
        <div class="business-card" data-user-agreement="<%= userData.contract_agreement %>">
            <div class="business-details">
                <div class="profile-pic" id="profile-pic"
                    style="background-image: url('/assets/<%= userData.profile_pic %>'); background-size: cover; background-position: center;">
                </div>
                <div class="user-data">
                    <span class="material-symbols-outlined">
                        storefront
                    </span>
                    <h4>
                        <%= userData.business_name %>
                    </h4>
                </div>
                <div class="user-data">
                    <span class="material-symbols-outlined">
                        location_city
                    </span>
                    <h4>
                        <%= userData.business_niche %>
                    </h4>
                </div>
                <div class="user-data">
                    <span class="material-symbols-outlined">
                        phone_enabled
                    </span>
                    <h4>
                        <%= userData.business_phone %>
                    </h4>
                </div>
                <div class="user-data">
                    <span class="material-symbols-outlined">
                        location_on
                    </span>
                    <h4>
                        <%= userData.location %>
                    </h4>
                </div>
                <button class="button-87" id="post">Post content</button>
                <h4>Note that you only post in this section to advertise your presence so everytime you post afresh the previous
                    post get replaed by you new post. To post multiple products that can be accessed by your customers, use the SHELF to the right of this page</h4>
                <dialog id="contract-dialog">
                    <h2>If you can see this screen, don't worry, it could be because of the folloing reason</h2>
                    <ul>
                        <li>You are registered as a vendor on this platform but have not accepted our vendor contract agreement</li>
                        <li>You account may have been banned and has been unbanned after a successful appeal</li>
                    </ul>
                    <h2>It is not a cause of concern just proceed below and make you contract agreemnt valid by clicking the button below!</h2>
                    <button class="button-87" id="contract" style="margin-left: 0px; border: none; outline: none;">Proceed to contract</button>
                </dialog>
            </div>
        </div>
        <div class="add-to-shelf">
            <div class="shelf-preview" id="shelf-preview">
                <% if (products && products.length> 0) { %>
                    <% products.forEach(product=> { %>
                        <div class="shelf-item">
                            <div class="product-image"
                                style="background-image: url('/assets/<%= product.item_image %>');"></div>
                            <h3>
                                <%= product.item_name %>
                            </h3>
                            <p>
                                Quantity: <%= product.item_quantity %>
                            </p>
                            <p><strong>Price: <%= product.item_price %></strong></p>
                            <p>Condition: <%= product.item_condition %>
                            </p>
                            <p>Status: <%= product.item_availability %>
                            </p>
                            <button class="remove-item" data-card-id="<%= product.id %>">Remove item</button>
                        </div>
                        <% }); %>
                    <% } else { %>
                    <p>No items found on your shelf. Add some cool stuff! ðŸ›’</p>
                <% } %>
            </div>
            <div class="feedback-div" id="feedback-div">
                <p class="feedback" id="success"></p>
                <p class="feedback" id="error"></p>
            </div>
            <button class="button-87" id="add_to_shelf">+ Add to shelf</button>
        </div> 
    </div>
    <div class="order-display">
        <div class="tabs">
            <button class="tab active" onclick="showTab('all-orders')" title="All time orders">All Orders</button>
            <button class="tab" onclick="showTab('new-orders')" title="Orders succesfully purchased by full payment but not yet delivered">Pending</button>
            <button class="tab" onclick="showTab('fulfilled-orders')" title="Orders customer received product for">Fulfilled</button>
            <button class="tab" onclick="showTab('cancelled-orders')" title="Orders purchased but cancelled by customer">Cancelled</button>
        </div>
        <dialog id="contract-dialog">
            <h2>If you can see this screen, don't worry, it could be because of the folloing reason</h2>
            <ul>
                <li>You are registered as a vendor on this platform but have not accepted our vendor contract agreement</li>
                <li>You account may have been banned and has been unbanned after a successful appeal</li>
            </ul>
            <h2>It is not a cause of concern just proceed below and make you contract agreemnt valid by clicking the button below!</h2>
            <button class="button-87" id="contract" style="margin-left: 0px; border: none; outline: none;">Proceed to contract</button>
        </dialog>
        <div class="tab-content">
            <div id="all-orders" class="tab-pane active">
                <% if (orders && orders.length > 0) { %>
                    <% orders.forEach(order => { %> 
                        <div class="card">
                                <div class="image" style="background-image: url('/assets/<%= order.product_image %>');"></div>
                                <h3>Product: <%= order.product_name %></h3>
                                <p>Order ID: <%= order.id %></p>
                                <p>Quantity: <%= order.quantity || 'N/A' %></p>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p>No orders found.</p>
                <% } %>      
            </div>
            <div id="new-orders" class="tab-pane">
                <% if (orders && orders.length > 0) { %>
                    <% orders.forEach(order => { %>
                        <% if (order.order_status === "paid") { %> 
                            <div class="card">
                                <div class="image" style="background-image: url('/assets/<%= order.product_image %>');"></div>
                                <h3>Product: <%= order.product_name %></h3>
                                <p>Order ID: <%= order.id %></p>
                                <p>Quantity: <%= order.quantity || 'N/A' %></p>
                            </div>
                        <% } %>
                    <% }); %>
                <% } else { %>
                    <p>No paid orders found.</p>
                <% } %> 
            </div>
            <div id="fulfilled-orders" class="tab-pane">
                <% if (orders && orders.length > 0) { %>
                    <% orders.forEach(order => { %>
                        <% if (order.order_status === "fulfilled") { %> <!-- Check if order_status is empty -->
                            <div class="card">
                                <div class="image" style="background-image: url('/uploads/<%= order.product_image %>');"></div>
                                <h3>Product: <%= order.product_name %></h3>
                                <p>Order ID: <%= order.id %></p>
                                <p>Quantity: <%= order.quantity || 'N/A' %></p>
                            </div>
                        <% } %>
                    <% }); %>
                <% } else { %>
                    <p>No fulfilled orders found.</p>
                <% } %> 
            </div>
            <div id="cancelled-orders" class="tab-pane">
                <% if (orders && orders.length > 0) { %>
                    <% orders.forEach(order => { %>
                        <% if (order.order_status === "cancelled") { %> <!-- Check if order_status is empty -->
                            <div class="card">
                                <div class="image" style="background-image: url('/uploads/<%= order.product_image %>');"></div>
                                <h3>Product: <%= order.product_name %></h3>
                                <p>Order ID: <%= order.id %></p>
                                <p>Quantity: <%= order.quantity || 'N/A' %></p>
                            </div>
                        <% } %>
                    <% }); %>
                <% } else { %>
                    <p>No cancelled orders found.</p>
                <% } %>  
            </div>
        </div>
    </div>  
    <script src="/scripts/dashboard.js"></script>
</body>
</html>